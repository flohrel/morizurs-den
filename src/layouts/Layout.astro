---
import LanguagePicker from '@/components/LanguagePicker.astro';
import Sidebar from '@/components/Sidebar/Sidebar.astro';
import '@fontsource-variable/josefin-sans';
import '@fontsource-variable/josefin-slab';
import { SEO } from 'astro-seo';
import ViewTransitions from 'astro/components/ViewTransitions.astro';
import { getLangFromUrl } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);

interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang={lang as string}>
  <head>
    <SEO
      title={title}
      titleTemplate="Florian Ohrel's portfolio - %s"
      description="Florian Ohrel is a full-stack developer based in Paris, France."
      charset="UTF-8"
      openGraph={{
        basic: {
          title: title,
          type: 'website',
          image:
            'https://user-images.githubusercontent.com/5182256/131216951-8f74f425-f775-463d-a11b-0e01ad9fce8d.png',
        },
        optional: {
          description: 'Florian Ohrel is a developer based in Paris, France.',
          locale: 'en_US',
          siteName: "Florian Ohrel's portfolio",
        },
      }}
      extend={{
        link: [{ rel: 'icon', type: 'image/svg+xml', href: '/favicon.ico' }],
        meta: [
          { name: 'generator', content: Astro.generator },
          { name: 'viewport', content: 'width=device-width,initial-scale=1' },
        ],
      }}
    />
    <ViewTransitions />
  </head>
  <body class="h-dvh w-full bg-content text-mint selection:bg-selection">
    <div id="overlay" class="fixed h-lvh w-full inset-0 bg-overlay z-30"></div>
    <div
      id="frame-content"
      class="grid grid-cols-12 gap-4 group/frame-content md:sidebar--toggle h-screen w-full z-50"
    >
      <Sidebar />
      <main
        class="col-start-2 col-span-10 md:col-start-4 md:col-span-8 row-start-1 row-auto p-4 md:p-6 xl:p-8 z-40 [transition:width_300ms_ease-in-out,margin_300ms_ease-in-out,opacity_500ms_ease-in-out,transform_500ms_ease-in-out] w-full max-w-7xl m-[0_auto]"
      >
        <slot />
      </main>
    </div>
    <LanguagePicker />
    <style is:global>
      @tailwind base;
      @tailwind components;
      @tailwind utilities;

      @layer base {
        *,
        *::before,
        *::after {
          box-sizing: border-box;
          /*border: 1px solid #d7ffff;*/
        }
        a {
          @apply hover:text-mintHover transition-colors duration-200 ease-in-out;
        }
        h1 {
          @apply font-sans font-semibold text-2xl md:text-3xl xl:text-4xl mb-1 md:mb-2 xl:mb-3 text-right;
        }
        h2 {
          @apply font-sans font-medium text-lg md:text-xl xl:text-2xl;
        }
        p {
          @apply font-slab font-normal text-base md:text-lg xl:text-xl mb-4 max-w-3xl;
        }
        html {
          -ms-overflow-style: none;
          scrollbar-width: none;
          overflow-y: scroll;
          &::-webkit-scrollbar {
            display: none;
          }
        }
      }

      @layer components {
      }

      @layer utilities {
        .x-collapse {
          @apply w-0 min-w-0 !important;
        }
      }
    </style>
  </body>
</html>
