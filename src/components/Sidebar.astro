---
import Navigation from '@/components/Navigation.astro';
import Social from '@/components/Social.astro';
import { Icon } from 'astro-icon/components';
---

<header
  class="fixed inset-[inherit] max-w-96 w-1/3 flex items-center z-50 [transition:width_500ms_ease-in-out]"
>
  <div
    id="sidebar"
    class="flex flex-col overflow-x-hidden border-r-2 border-mint/35 inset-[inherit] items-left justify-between self-stretch grow"
  >
    <div
      id="info"
      class="flex flex-col p-4 gap-1 md:gap-2 xl:gap-3 sm:p-6 md:p-8 lg:p-10 xl:p-12 2xl:p-14"
    >
      <h1 class="leading-5">Florian Ohrel</h1>
      <h2 class="leading-5">Developer</h2>
    </div>
    <Navigation />
    <Social />
  </div>
  <button
    id="sidebar-btn"
    class="inset-[inherit] h-9 w-6 text-mint/85 hover:text-mintHover/85 border-mint/35 hover:border-mintHover/35 max-md:border-r-2 max-md:border-y-2 rounded-r-lg p-[2px] z-50 md:x-collapse md:[transition:width_300ms_ease-in-out,border-width_300ms_ease-in-out] max-md:[transition:width_300ms_ease-in-out_500ms,border-width_300ms_ease-in-out_500ms,color_100ms_ease-in-out]"
    ><Icon
      id="sidebar-btn__icon"
      name={'material-symbols:menu-open'}
      class={'w-4 h-4 -scale-x-100 md:x-collapse transition-[width] duration-300 ease-in-out max-md:delay-500'}
    /></button
  >
</header>

<script>
  const button = document.getElementById('sidebar-btn');
  const buttonIcon = document.getElementById('sidebar-btn__icon');
  const contentFrame = document.getElementById('content-frame');
  const navSelected = document.querySelector('nav ul li.selected div');

  button?.addEventListener('click', () => {
    contentFrame?.classList.toggle('sidebar--collapse');
    buttonIcon?.classList.toggle('-scale-x-100');
    navSelected?.classList.toggle('max-md:x-collapse');
  });

  window.addEventListener('resize', () => {
    if (window.matchMedia('(min-width: 768px)').matches) {
      contentFrame?.classList.remove('sidebar--collapse');
      navSelected?.classList.remove('max-md:x-collapse');
    } else {
      contentFrame?.classList.add('sidebar--collapse');
    }
  });
</script>
